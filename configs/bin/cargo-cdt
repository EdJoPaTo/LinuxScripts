#!/usr/bin/env bash

# When used as a cargo subcommand the first argument is the subcommand which should be removed
if [[ -n $1 ]] && [[ "$0" == *"$1" ]]; then
	shift 1
fi

set -ux

cargo +nightly fmt --check

nice cargo clippy --all-targets --keep-going "$@"

nice cargo doc --no-deps "$@"

# nice cargo build --all-targets --keep-going "$@"
nice cargo test --quiet --no-fail-fast "$@"
